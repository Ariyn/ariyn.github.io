{"ParentUid":"LF-2QqMWV","Uid":"LF-2QqMWV","Data":"golang에서 custom error 구조체를 사용하는 경우 errors.WithStack을 사용하지 말 것 #TIL #golang","Order":0,"IsRoot":true,"Children":[{"ParentUid":"LF-2QqMWV","Uid":"hP6Ctgc7o","Data":"이경우 type이 error으로 바뀌기 때문에, type체크가 통과가 안된다","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"LF-2QqMWV","Uid":"GwMtsliVl","Data":"https://github.com/pkg/errors/blob/v0.9.1/errors.go#L145","Order":1,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"LF-2QqMWV","Uid":"rhzpjJMZH","Data":"```javascript\nfunc WithStack(err error) error {\n\tif err == nil {\n\t\treturn nil\n\t}\n\treturn \u0026withStack{\n\t\terr,\n\t\tcallers(),\n\t}\n}\n\ntype withStack struct {\n\terror\n\t*stack\n}```","Order":2,"IsRoot":false,"Children":[{"ParentUid":"rhzpjJMZH","Uid":"I1RQkHMF8","Data":"해당 부분의 코드를 보면 `\u0026withStack{error}`을 리턴하는데, 이로 인해서 withStack타입 혹은 error타입으로 인식되버림","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"LF-2QqMWV","Uid":"aueE8Wpox","Data":"```javascript\nswitch err.(type) {\n  case ErrCustom:\n    fmt.Println(\"custom\")\n  default:\n  \tfmt.Println(\"default\")\n}```","Order":3,"IsRoot":false,"Children":[{"ParentUid":"aueE8Wpox","Uid":"utWwkItSV","Data":"이와같은 경우, default로 통과됨","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":[],"CreateTime":"2021-10-26T23:01:07+09:00","EditTime":"1970-01-01T09:00:00+09:00"}