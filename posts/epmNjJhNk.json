{"ParentUid":"epmNjJhNk","Uid":"epmNjJhNk","Data":"맥에서 swift로 window들의 정보를 가져오는 방법 #TIL #swift #osx","Order":0,"IsRoot":true,"Children":[{"ParentUid":"epmNjJhNk","Uid":"0j6E5FU71","Data":"```swift\nimport Cocoa\nimport Quartz\n\nlet options:CGWindowListOption = CGWindowListOption(arrayLiteral: CGWindowListOption.excludeDesktopElements, CGWindowListOption.optionOnScreenOnly)\nlet relativeToWindow: CGWindowID = kCGNullWindowID\n\nlet infos = CGWindowListCopyWindowInfo(options, relativeToWindow)\n\nstruct WindowData:Codable {\n    let processName: String\n    let windowName: String\n    let x: Int\n    let y: Int\n    let width: Int\n    let height: Int\n}\nvar collectedInfo: [WindowData] = []\nfor info in infos as! [NSDictionary] {\n    let bound:NSDictionary = info[\"kCGWindowBounds\"] as! NSDictionary\n    let processName:String = info[\"kCGWindowOwnerName\"] as? String ?? \"\"\n    let windowName:String = info[\"kCGWindowName\"] as? String ?? \"\"\n\n    collectedInfo.append(WindowData(\n        processName: processName.replacingOccurrences(of: \",\", with:\"\\\\,\"),\n        windowName: windowName.replacingOccurrences(of: \",\", with:\"\\\\,\"),\n        x:bound[\"X\"] as? Int ?? -10000,\n        y:bound[\"Y\"] as? Int ?? -10000,\n        width:bound[\"width\"] as? Int ?? -10000,\n        height:bound[\"hwight\"] as? Int ?? -10000\n    ))\n}\n\nif let jsonData = try? JSONEncoder().encode(collectedInfo), let jsonString = String(data: jsonData, encoding: .utf8) {\n    print(jsonString)\n}```","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"epmNjJhNk","Uid":"hEhWIUpx5","Data":"이후에 환경설정 \u003e 보안 \u003e 화면 기록에서 터미널을 추가 \u0026 터미널 재시작 해줘야 한다.","Order":1,"IsRoot":false,"Children":[{"ParentUid":"hEhWIUpx5","Uid":"j-peBTgwL","Data":"안할경우 kCGWindowName (각 위도우별 제목)이 안뜸","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"epmNjJhNk","Uid":"JPUMqTnc4","Data":"CGWindowListCopyWindowInfo가 리턴하는 형식","Order":2,"IsRoot":false,"Children":[{"ParentUid":"JPUMqTnc4","Uid":"xGcSqo9YC","Data":"```swift\n[\n  {\n    kCGWindowAlpha = 0;\n    kCGWindowBounds =     {\n        Height = 0;\n        Width = 0;\n        X = 0;\n        Y = 0;\n    };\n    kCGWindowIsOnscreen = 0;\n    kCGWindowLayer = 0;\n    kCGWindowMemoryUsage = 1232;\n    kCGWindowName = \"utf-8 encoded string\";\n    kCGWindowNumber = 1884;\n    kCGWindowOwnerName = \"utf-8 encoded string\";\n    kCGWindowOwnerPID = 2895;\n    kCGWindowSharingState = 1;\n    kCGWindowStoreType = 1;\n}\n]```","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"epmNjJhNk","Uid":"lGurddRK7","Data":"추가적으로 할 일","Order":3,"IsRoot":false,"Children":[{"ParentUid":"lGurddRK7","Uid":"NMp-MrzTe","Data":"아이콘 정보 가져오기","Order":0,"IsRoot":false,"Children":[{"ParentUid":"NMp-MrzTe","Uid":"DYHNOWMbm","Data":"https://stackoverflow.com/questions/36389173/how-to-observe-other-application-icon-in-os-x","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"epmNjJhNk","Uid":"YlEZ3e7yt","Data":"느낀점","Order":4,"IsRoot":false,"Children":[{"ParentUid":"YlEZ3e7yt","Uid":"7a0BJulFo","Data":"윈도우의 정보를 가져오도록 구현하는것과 비슷한 시간이 걸린 json serialize","Order":0,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"YlEZ3e7yt","Uid":"sg9eJ4PBa","Data":"이렇게 어려울 일인가? 으음....","Order":1,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"},{"ParentUid":"YlEZ3e7yt","Uid":"6_1W7U8J_","Data":"내가 swift의 핵심을 이해 못하는건가, swift의 핵심이 맛이 가 있는것인가...","Order":2,"IsRoot":false,"Children":[],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":null,"CreateTime":"1970-01-01T09:00:00+09:00","EditTime":"1970-01-01T09:00:00+09:00"}],"Images":[],"CreateTime":"2021-12-01T22:26:33+09:00","EditTime":"1970-01-01T09:00:00+09:00"}