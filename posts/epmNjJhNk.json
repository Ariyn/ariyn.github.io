{"ParentUid":"epmNjJhNk","Data":"맥에서 swift로 window들의 정보를 가져오는 방법 #TIL","Uid":"epmNjJhNk","Order":0,"IsRoot":true,"Children":[{"ParentUid":"epmNjJhNk","Data":"```swift\nimport Cocoa\nimport Quartz\n\nlet options:CGWindowListOption = CGWindowListOption(arrayLiteral: CGWindowListOption.excludeDesktopElements, CGWindowListOption.optionOnScreenOnly)\nlet relativeToWindow: CGWindowID = kCGNullWindowID\n\nlet infos = CGWindowListCopyWindowInfo(options, relativeToWindow)\n\nstruct WindowData:Codable {\n    let processName: String\n    let windowName: String\n    let x: Int\n    let y: Int\n    let width: Int\n    let height: Int\n}\nvar collectedInfo: [WindowData] = []\nfor info in infos as! [NSDictionary] {\n    let bound:NSDictionary = info[\"kCGWindowBounds\"] as! NSDictionary\n    let processName:String = info[\"kCGWindowOwnerName\"] as? String ?? \"\"\n    let windowName:String = info[\"kCGWindowName\"] as? String ?? \"\"\n\n    collectedInfo.append(WindowData(\n        processName: processName.replacingOccurrences(of: \",\", with:\"\\\\,\"),\n        windowName: windowName.replacingOccurrences(of: \",\", with:\"\\\\,\"),\n        x:bound[\"X\"] as? Int ?? -10000,\n        y:bound[\"Y\"] as? Int ?? -10000,\n        width:bound[\"width\"] as? Int ?? -10000,\n        height:bound[\"hwight\"] as? Int ?? -10000\n    ))\n}\n\nif let jsonData = try? JSONEncoder().encode(collectedInfo), let jsonString = String(data: jsonData, encoding: .utf8) {\n    print(jsonString)\n}```","Uid":"0j6E5FU71","Order":0,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"epmNjJhNk","Data":"이후에 환경설정 \u003e 보안 \u003e 화면 기록에서 터미널을 추가 \u0026 터미널 재시작 해줘야 한다.","Uid":"hEhWIUpx5","Order":1,"IsRoot":false,"Children":[{"ParentUid":"hEhWIUpx5","Data":"안할경우 kCGWindowName (각 위도우별 제목)이 안뜸","Uid":"j-peBTgwL","Order":0,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"epmNjJhNk","Data":"CGWindowListCopyWindowInfo가 리턴하는 형식","Uid":"JPUMqTnc4","Order":2,"IsRoot":false,"Children":[{"ParentUid":"JPUMqTnc4","Data":"```swift\n[\n  {\n    kCGWindowAlpha = 0;\n    kCGWindowBounds =     {\n        Height = 0;\n        Width = 0;\n        X = 0;\n        Y = 0;\n    };\n    kCGWindowIsOnscreen = 0;\n    kCGWindowLayer = 0;\n    kCGWindowMemoryUsage = 1232;\n    kCGWindowName = \"utf-8 encoded string\";\n    kCGWindowNumber = 1884;\n    kCGWindowOwnerName = \"utf-8 encoded string\";\n    kCGWindowOwnerPID = 2895;\n    kCGWindowSharingState = 1;\n    kCGWindowStoreType = 1;\n}\n]```","Uid":"xGcSqo9YC","Order":0,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"epmNjJhNk","Data":"추가적으로 할 일","Uid":"lGurddRK7","Order":3,"IsRoot":false,"Children":[{"ParentUid":"lGurddRK7","Data":"아이콘 정보 가져오기","Uid":"NMp-MrzTe","Order":0,"IsRoot":false,"Children":[{"ParentUid":"NMp-MrzTe","Data":"https://stackoverflow.com/questions/36389173/how-to-observe-other-application-icon-in-os-x","Uid":"DYHNOWMbm","Order":0,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"epmNjJhNk","Data":"감상","Uid":"YlEZ3e7yt","Order":4,"IsRoot":false,"Children":[{"ParentUid":"YlEZ3e7yt","Data":"윈도우의 정보를 가져오도록 구현하는것과 비슷한 시간이 걸린 json serialize","Uid":"7a0BJulFo","Order":0,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"YlEZ3e7yt","Data":"이렇게 어려울 일인가? 으음....","Uid":"sg9eJ4PBa","Order":1,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"},{"ParentUid":"YlEZ3e7yt","Data":"내가 swift의 핵심을 이해 못하는건가, swift의 핵심이 맛이 가 있는것인가...","Uid":"6_1W7U8J_","Order":2,"IsRoot":false,"Children":[],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"1970-01-01T00:00:00Z","EditTime":"1970-01-01T00:00:00Z"}],"CreateTime":"2021-08-10T14:30:51Z","EditTime":"1970-01-01T00:00:00Z"}